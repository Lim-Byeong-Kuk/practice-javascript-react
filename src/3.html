<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
  </head>
  <body>
    <script>
      var u = [1, 2, 23, 4];
      // var k = ...u
      var k = { a: [10, 20, 30], b: "홍길동" };
      var r = { ...k, r: [100, 200] };
      console.log(r);

      var listOfObj = [
        { a: 100, b: 200, c: [300, 400, 500, { c: [20] }] },
        { a: 100, b: 200, c: [301, 402, 503, { c: [20] }] },
        { a: 100, b: 200, c: [306, 405, 504, { c: [20] }] },
        { a: 100, b: 200, c: [307, 408, 509, { c: [20] }] },
        { a: 100, b: 200, c: [310, 411, 512, { c: [20] }] },
      ];

      // spread operator, map 다음과 같이 만들기
      // var listOfObj = [
      //   { a: 100, b: 200, c: [300, 400, 500, { c: [20, 3] }] },
      //   { a: 100, b: 200, c: [301, 402, 503, { c: [20, 4] }] },
      //   { a: 100, b: 200, c: [306, 405, 504, { c: [20, 5] }] },
      //   { a: 100, b: 200, c: [307, 408, 509, { c: [20, 6] }] },
      //   { a: 100, b: 200, c: [310, 411, 512, { c: [20, 7] }] },
      // ];

      var result = [];

      //1) i.c[0], i.c[1], i.c[2] 요소를 일일이 해왔음
      // result = listOfObj.map((i, index) => ({
      //   ...i,
      //   c: [i.c[0], i.c[1], i.c[2], { c: [...i.c[3].c, 3 + index] }],
      // }));

      //2) slice 를 이용해 c 배열의 마지막 요소를 제거
      // result = listOfObj.map((i, index) => {
      //   var arrC = i.c.slice(0, -1);
      //   var arr = [...arrC, { c: [...i.c[3].c, index + 3] }];
      //   return {
      //     ...i,
      //     c: [...arr],
      //   };
      // });

      //3) filter 를 이용해 c 배열에서 number 만 가져옴
      result = listOfObj.map((i, index) => {
        var num = i.c.filter((i) => typeof i == "number");
        var arr = [...num, { c: [...i.c[3].c, index + 3] }];
        return {
          ...i,
          c: [...arr],
        };
      });

      console.log(result);
    </script>
  </body>
</html>
